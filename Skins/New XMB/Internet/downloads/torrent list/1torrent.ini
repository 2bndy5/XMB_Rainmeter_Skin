[rainmeter]
update=1000
dynamicwindowsize=1

[variables]
@Include=#@#Variables.inc
TorrentsOffNone=-2

Measures__________________________________________________________________________________________________________________________________________________________________________________________________________

[measureTorrentsOffNone]
measure=calc
updatedivider=-1
dynamicvariables=1
formula=#TorrentsOffNone#
ifabovevalue=-1
ifaboveaction=[!enablemeasure utorrentfeedlist]
ifequalvalue=-1
ifequalaction=[!disablemeasure utorrentfeedlist][!hidemetergroup item1][!showmeter notorrentdisplay]
ifbelowvalue=-1
ifbelowaction=[!disablemeasure utorrentfeedlist][!hidemetergroup item1][!showmeter utorrentNotRunning]

[utorrentfeedlist]
measure=plugin
plugin=webparser
url=http://#utorrentUSER#:#utorrentPASS#@127.0.0.1:#uTorrentPORT#/gui/?list=1
dynamicvariables=1
regexp=(?siU)\n(\[.*\]),.*$
updaterate=1
disabled=1

[utorrentfeed1]
measure=plugin
plugin=webparser
url=[utorrentfeedlist]
dynamicvariables=1
stringindex=1
RegExp=(?siU).*\[".*,"(.*)",(.*),(.*),(.*),.*,.*,(.*),(.*),(.*),".*",(.*),(.*),(.*),(.*),.*,.*,(.*),".*",".*","(.*)\s.*\%",".*","(.*)".*\],?.*$

[Torrent1Name]
measure=plugin
plugin=webparser
url=[utorrentfeed1]
stringindex=1
substitute=".":" "

[Torrent1Size]
measure=plugin
plugin=webparser
url=[utorrentfeed1]
stringindex=2
ifcondition=Torrent1Size > 1073741824
iftrueaction=!setvariable Size1calc "/1073741824,2]Gb"
iffalseaction=!setvariable Size1calc "/1048576,1]Mb"

[Torrent1PercentProgress]
measure=plugin
plugin=webparser
url=[utorrentfeed1]
stringindex=3

[Torrent1Downloaded]
measure=plugin
plugin=webparser
url=[utorrentfeed1]
stringindex=4
ifcondition=Torrent1Downloaded > 1073741824
iftrueaction=!setvariable downloaded1calc "/1073741824,2]Gb"
iffalseaction=!setvariable downloaded1calc "/1048576,1]Mb"

[Torrent1UpSpeed]
measure=plugin
plugin=webparser
url=[utorrentfeed1]
stringindex=5

[Torrent1DownSpeed]
measure=plugin
plugin=webparser
url=[utorrentfeed1]
stringindex=6
ifcondition=Torrent1DownSpeed > 1048576
iftrueaction=!setvariable downspeed1calc "/1048576,1]Mb"
iffalseaction=!setvariable downspeed1calc "/1024,1]kb"

[Torrent1ETA]
measure=plugin
plugin=webparser
url=[utorrentfeed1]
stringindex=7
substitute="-1":"?"
ifcondition=(Torrent1ETA / 60) > 59
iftrueaction=!setvariable ETA1Acalc "hr:0]hr"
iffalseaction=!setvariable ETA1Acalc "min:0]min"
ifcondition2=(Torrent1ETA / 60) < 60
iftrueaction2=!setvariable ETA1Bcalc "sec:0]sec"
iffalseaction2=!setvariable ETA1Bcalc "min:0]min"

[Torrent1ETAhr]
measure=calc
formula=(Torrent1ETA/3600)%12-(((Torrent1ETA/60)%60)>30?1:0)

[Torrent1ETAmin]
measure=calc
formula=(Torrent1ETA/60)%60-((Torrent1ETA%60)>30?1:0)

[Torrent1ETAsec]
measure=calc
formula=Torrent1ETA%60

[Torrent1PeersConnected]
measure=plugin
plugin=webparser
url=[utorrentfeed1]
stringindex=8

[Torrent1PeerSwarm]
measure=plugin
plugin=webparser
url=[utorrentfeed1]
stringindex=9

[Torrent1SeedsConnected]
measure=plugin
plugin=webparser
url=[utorrentfeed1]
stringindex=10

[Torrent1SeedSwarm]
measure=plugin
plugin=webparser
url=[utorrentfeed1]
stringindex=11

[Torrent1RemainingSize]
measure=plugin
plugin=webparser
url=[utorrentfeed1]
stringindex=12
ifcondition=Torrent1RemainingSize >= 1073741824
iftrueaction=!setvariable remaining1calc "/1073741824,2]Gb"
iffalseaction=!setvariable remaining1calc "/1048576,1]Mb"

[Torrent1Status]
measure=plugin
plugin=webparser
url=[utorrentfeed1]
stringindex=13

[Torrent1SaveDir]
measure=plugin
plugin=webparser
url=[utorrentfeed1]
stringindex=14
substitute="\\":"\"

Meters____________________________________________________________________________________________________________________________________________________________________________________________________________

[torrentBG1]
meter=image
solidcolor=#2nd.Solid#,130
x=0
y=0
w=200
h=85
dynamicvariables=1
group=item1
tooltiptext="Time Left=[Torrent1ETA#ETA1Acalc# [Torrent1ETA#ETA1Bcalc##crlf#Downloaded=[Torrent1Downloaded:#downloaded1calc#/[Torrent1Size:#Size1calc##crlf#Remaining=[Torrent1RemainingSize:#remaining1calc##crlf#Down Speed=[Torrent1DownSpeed:#downspeed1calc#/sec#crlf#Up Speed=[Torrent1UpSpeed:/1024,1]kb/sec#CRLF#Seeds=[Torrent1SeedsConnected]/[Torrent1SeedSwarm]#crlf#Peers=[Torrent1PeersConnected]/[Torrent1PeerSwarm]"

[torrenticon1]
meter=image
imagename=#@#images\themes\#theme#\folder.png
greyscale=#greyscale#
imagetint=#1st.Solid#
solidcolor=0,0,0,1
dynamicvariables=1
x=r
y=-6r
w=50
h=50
group=item1
leftmouseupaction=[explorer.exe [Torrent1SaveDir]]

[torrentstatus1]
meter=string
measurename=torrent1Status
text="%1 [Torrent1PercentProgress:/10,0]%"
fontface=#fontface#
fontsize=(#fontsize#-2)
fontcolor=#fontcolor#
stringeffect=shadow
stringalign=leftcenter
clipstring=1
dynamicvariables=1
solidcolor=0,0,0,1
x=50r
y=25r
w=150
h=25
group=item1

[torrentname1]
meter=string
measurename=torrent1name
text="%1"
fontface=#fontface#
fontsize=#fontsize#
fontcolor=#fontcolor#
stringeffect=shadow
stringalign=lefttop
clipstring=1
dynamicvariables=1
solidcolor=0,0,0,1
x=-50r
y=19r
w=200
h=47
group=item1

[notorrentdisplay]
meter=string
text="There Are No Active Torrents"
fontface=#fontface#
fontsize=#fontsize#
fontcolor=#fontcolor#
stringeffect=shadow
stringalign=centercenter
clipstring=1
solidcolor=0,0,0,1
x=100
y=20
w=200
h=80
group=TorrentOffNone
hidden=1

[utorrentNotRunning]
meter=string
text="µTorrent Is not Running"
fontface=#fontface#
fontsize=#fontsize#
fontcolor=#fontcolor#
stringeffect=shadow
stringalign=centercenter
clipstring=1
solidcolor=0,0,0,1
x=r
y=r
w=200
h=80
group=TorrentOffNone
hidden=1
